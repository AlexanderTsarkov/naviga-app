# Radio profile presets v0 (OOTB)

**Purpose:** Формализовать «продуктовые пресеты» радиосвязи так, чтобы UART-модули (E22/E220) и будущие SPI-модули могли быть совместимы на уровне конфига. Пользователь и протокол оперируют абстракциями, не сырыми LoRa-параметрами.

**Related:** [ADR radio band strategy](../adr/radio_band_strategy_v0.md), [OOTB Radio v0](ootb_radio_v0.md).

---

## 1. Абстракции (продуктовый контракт)

| Идентификатор | Тип | Описание |
|---------------|-----|----------|
| **band_id** | 433 / 868 / … | Диапазон (частота); определяет SKU/модуль. |
| **channel_id** | целое | Номер канала в рамках band; контракт поддерживает поле (seed может фиксировать 1). |
| **speed_preset_id** | целое или enum | Пресет скорости (продуктовый); не SF/BW/CR. |
| **power_level_id** | целое или enum | Уровень мощности (продуктовый); например `module_min`, `module_max`, шаги производителя. |
| **profile_id** | строка | Идентификатор профиля целиком, например `ootb_public_v0`. |

---

## 2. OOTB public profile

| Поле | Значение | Примечание |
|------|----------|------------|
| **profile_id** | `ootb_public_v0` | Public OOTB profile; «Back to public network» сбрасывает на этот профиль. |
| **band_id** | 433 | OOTB seed/v0 — 433 MHz (E22/E220-400). |
| **channel_id** | 1 | Seed default; в prod смена канала через приложение. |
| **speed_preset_id** | default | TBD: маппинг на AirRate/Speed производителя или SF/BW/CR для SPI. |
| **power_level_id** | module_min | **Минимальная мощность, поддерживаемая модулем** (не legal max). Для Ebyte UART — «min power» по командам. |

---

## 3. UART mapping (E22 / E220)

- **Канал:** понятие производителя (**Channel**), не частота в герцах. Соответствие channel_id ↔ частота задаётся таблицей производителя.
  - Таблица частот по channel_id: если доступна в даташите/документации модуля — добавить ссылкой или таблично в этот раздел; иначе — **TBD**, структура (channel_id в контракте) сохраняется.
- **Скорость:** понятие производителя (**AirRate** / **Speed**), не SF/BW/CR. speed_preset_id маппится на предустановки производителя; конкретные значения — TBD по документации модуля.
- **Мощность:** шаги производителя (**Power** enum / уровни). power_level_id = `module_min` маппится на минимальный поддерживаемый модулем уровень; остальные уровни — по документации модуля.

---

## 4. SPI mapping (TBD)

- Для модулей с интерфейсом SPI конфиг задаётся через **freq + SF/BW/CR** (и при необходимости другие параметры LoRa).
- Требование совместимости: один и тот же **channel_id** и **speed_preset_id** (в продуктовом смысле) должны давать совместимый по эфиру результат для UART и SPI модулей в рамках одного band_id (например, один и тот же channel_id=1 на 433 MHz — одна и та же рабочая частота/параметры).
- Конкретные значения freq, SF, BW, CR для SPI — **TBD**; здесь задаётся только структура и требование соответствия channel_id / speed_preset_id между UART и SPI.
