# Референсные репозитории Meshtastic

Папки **meshtastic-android**, **meshtastic-ios**, **meshtastic-firmware** нужны в проекте Naviga **только как примеры**: архитектура, организация кода, решения задач (BLE, protobuf, карты, прошивка). Их **не планируется менять** (пока) — это открытый код Meshtastic, который удобнее смотреть в своей локальной копии, чем только в оригинальном репозитории на GitHub.

## Как с ними поступить

### Рекомендация: локальные копии, не коммитить в Naviga

1. **Держать локальные клоны** — так проще искать по коду, смотреть историю, работать офлайн.
2. **Не коммитить их в репозиторий Naviga** — они большие, это не ваш код; в корне репо добавлен `.gitignore`, чтобы эти папки не попадали в коммиты.
3. **Обновлять при необходимости** — раз в N времени делать `git pull` в каждой папке (или оставить зафиксированную версию, если удобнее).

Итого: оставляете папки **meshtastic-android**, **meshtastic-ios**, **meshtastic-firmware** там, где они лежат сейчас; репозиторий Naviga их игнорирует, вы продолжаете пользоваться ими только как референсом.

---

## Как получить копии (новый клон репо / другой компьютер)

Два варианта.

### Вариант 1: Скрипт (одна команда)

Из корня репо Naviga:

```bash
./tools/setup_reference_repos.sh
```

Скрипт клонирует **официальные** репозитории Meshtastic (upstream) в папку **reference/** неглубоким клоном (`--depth 1`), чтобы не тянуть всю историю:

- `reference/meshtastic-android`
- `reference/meshtastic-ios`
- `reference/meshtastic-firmware`

Папка **reference/** тоже добавлена в `.gitignore`, в репо Naviga не попадёт.

Если вы уже держите клоны в корне (**meshtastic-android** и т.д.) — скрипт можно не запускать, просто пользоваться существующими папками.

### Вариант 2: Вручную

Клонировать нужные репо в любое место (внутри Naviga или снаружи):

```bash
git clone --depth 1 https://github.com/meshtastic/Meshtastic-Android.git meshtastic-android
git clone --depth 1 https://github.com/meshtastic/Meshtastic-Apple.git meshtastic-ios
git clone --depth 1 https://github.com/meshtastic/firmware.git meshtastic-firmware
```

`--depth 1` — только последний коммит, меньше места и быстрее.

---

## Свои ветки (naviga-poc, naviga-custom)

Сейчас у вас могут быть клоны с **вашими** ветками (например `naviga-poc` для приложений, `naviga-custom` для прошивки). Их можно продолжать держать как есть: они уже лежат в репо и игнорируются через `.gitignore`. Менять ничего не обязательно — просто не коммитить эти папки в Naviga.

Скрипт `setup_reference_repos.sh` клонирует **только upstream** в **reference/** и не трогает ваши существующие **meshtastic-*** в корне. То есть:

- **meshtastic-android**, **meshtastic-ios**, **meshtastic-firmware** в корне — ваши рабочие копии (референс, при желании со своими ветками), git их не видит.
- **reference/** — опционально, «чистый» upstream для быстрого развёртывания на другой машине одной командой.

---

## Альтернатива: submodules

Если захочется, чтобы при `git clone --recursive` референсные репо подтягивались автоматически, их можно оформить как **git submodules** (указать официальные URL и тег/коммит). Тогда они будут «частью» репо только как ссылки, без кода в истории Naviga. Это чуть сложнее в настройке и обновлении; текущий вариант (локальные копии + .gitignore) проще и достаточно для использования только как примеров архитектуры и решений.

---

## Кратко

| Вопрос | Ответ |
|--------|--------|
| Нужны ли папки meshtastic-* в репо? | Да, как локальный референс — удобнее, чем смотреть только в браузере. |
| Коммитить их в Naviga? | Нет. Они в `.gitignore`. |
| Где держать? | Как сейчас в корне или в `reference/` после скрипта — на ваш выбор. |
| Обновлять? | По желанию: `git pull` в нужной папке или перезапуск скрипта для `reference/`. |
