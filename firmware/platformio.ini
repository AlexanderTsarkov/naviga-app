; Minimal PlatformIO skeleton for CI (Issue #38).
; One env: esp32dev + arduino, no upload.

[env:esp32dev]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
lib_deps =
  xreef/EByte LoRa E220 library
  adafruit/Adafruit SSD1306
  adafruit/Adafruit GFX Library
build_flags =
  -DHW_PROFILE_DEVKIT_E220_OLED
  -DGNSS_PROVIDER_STUB

[env:devkit_e220_oled]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
lib_deps =
  xreef/EByte LoRa E220 library
  adafruit/Adafruit SSD1306
  adafruit/Adafruit GFX Library
build_flags =
  -DHW_PROFILE_DEVKIT_E220_OLED
  -DGNSS_PROVIDER_STUB

[env:devkit_e220_oled_gnss]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
lib_deps =
  xreef/EByte LoRa E220 library
  adafruit/Adafruit SSD1306
  adafruit/Adafruit GFX Library
build_flags =
  -DHW_PROFILE_DEVKIT_E220_OLED_GNSS
  -DGNSS_PROVIDER_UBLOX
  -DGNSS_UBLOX_DIAG=1

[env:test_native]
platform = native
test_framework = unity
test_build_src = true
build_flags =
  -std=gnu++11
  -DHW_PROFILE_DEVKIT_E220_OLED
build_src_filter =
  -<*>
  +<platform/ble_transport_core.cpp>

[env:test_native_nodetable]
platform = native
test_framework = unity
test_build_src = false
build_flags =
  -std=gnu++11
