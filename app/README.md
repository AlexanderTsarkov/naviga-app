# üöÄ Naviga - Clean Meshtastic API

–ß–∏—Å—Ç–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Meshtastic —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ Flutter.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
naviga_app/lib/meshtastic/
‚îú‚îÄ‚îÄ meshtastic.dart              # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îî‚îÄ‚îÄ meshtastic_service.dart  # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ protocol/
‚îÇ   ‚îî‚îÄ‚îÄ meshtastic_protocol.dart # –ü—Ä–æ—Ç–æ–∫–æ–ª –∏ –ø–∞—Ä—Å–∏–Ω–≥
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ meshtastic_database.dart # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ ui/
    ‚îî‚îÄ‚îÄ meshtastic_test_ui.dart  # UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### **MeshtasticService** (core)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º —á–µ—Ä–µ–∑ BLE
- Handshake —Å Meshtastic —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—Ä–æ—Å—ã –ø–æ–∑–∏—Ü–∏–π –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

### **MeshtasticProtocol** (protocol)
- –°–æ–∑–¥–∞–Ω–∏–µ protobuf —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–æ–±—ä–µ–∫—Ç–æ–≤

### **MeshtasticDatabase** (database)
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –•—Ä–∞–Ω–µ–Ω–∏–µ —É–∑–ª–æ–≤, –ø–æ–∑–∏—Ü–∏–π, –º–µ—Ç—Ä–∏–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### **MeshtasticTestUI** (ui)
- –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```dart
import 'package:naviga_app/meshtastic/meshtastic.dart';

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
final meshtasticService = MeshtasticService();

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
final success = await meshtasticService.connectToDevice(device);

// –ó–∞–ø—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏
await meshtasticService.requestPosition(nodeNum);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
final nodes = await meshtasticService.getAllNodes();
final positions = await meshtasticService.getLatestPositions();
```

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **BLE –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ Meshtastic —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- ‚úÖ **Protobuf –ø–∞—Ä—Å–∏–Ω–≥** –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ **–ó–∞–ø—Ä–æ—Å—ã –ø–æ–∑–∏—Ü–∏–π** –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- ‚úÖ **–ì–µ–æ–æ–±—ä–µ–∫—Ç—ã** –¥–ª—è –æ–±–º–µ–Ω–∞ —Ç–æ—á–∫–∞–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ **–ß–∏—Å—Ç—ã–π –∫–æ–¥** –±–µ–∑ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **BLE Service**: `6ba1b218-15a8-461f-9fa8-5dcae273eafd`
- **MTU**: 512 –±–∞–π—Ç
- **Channels**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ 0-8
- **Protobuf**: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã Meshtastic
- **Database**: SQLite —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. –í—ã–±–µ—Ä–∏—Ç–µ Meshtastic —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å"
4. –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö
5. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–µ–∫—Ü–∏—è—Ö

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∞—Ä—Ç
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≥–µ–æ–æ–±—ä–µ–∫—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É iOS

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Meshtastic Flutter API Guide](docs/Meshtastic_Flutter_API_Guide.md)
- [Troubleshooting Position Updates](docs/Troubleshooting%20position%20updates.md)